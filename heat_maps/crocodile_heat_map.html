<!DOCTYPE html>
<html>
<head>
    <title>全球主要鳄鱼分布地近十年气温变化及性别比例变化图</title>
    <meta charset="utf-8">
    <script src="echarts/echarts.min.js"></script>
    <script src="echarts/map/js/world.js"></script>
    <style>
        #map-container {
            width: 900px;
            height: 600px;
            margin: 0 auto;
        }
        .title {
            text-align: center;
            font-family: Arial, sans-serif;
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .subtitle {
            text-align: center;
            font-family: Arial, sans-serif;
            color: #666;
            font-size: 18px;
            margin-bottom: 25px;
        }
        .data-table {
            width: 90%;
            margin: 20px auto;
            border-collapse: collapse;
            font-family: Arial, sans-serif;
        }
        .data-table th, .data-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .data-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        .data-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .note {
            width: 90%;
            margin: 20px auto;
            font-family: Arial, sans-serif;
            font-size: 14px;
            color: #555;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <h2 class="title">全球主要鳄鱼分布地近十年气温变化及性别比例变化</h2>
    <div id="map-container"></div>

    <table class="data-table">
        <tr>
            <th>鳄鱼种类</th>
            <th>分布区域</th>
            <th>温度变化范围(℃)</th>
            <th>雌雄比例(♀:♂)</th>
            <th>关键影响因素</th>
            <th>数据来源</th>
        </tr>
        <tr>
            <td>扬子鳄</td>
            <td>中国长江流域</td>
            <td>年均温15.8℃→18.2℃</td>
            <td>3:1→7:1</td>
            <td>冬季升温缩短冬眠期，巢温突破32.5℃阈值</td>
            <td>保护区监测数据</td>
        </tr>
        <tr>
            <td>密西西比鳄(短吻鳄)</td>
            <td>美国佛罗里达州</td>
            <td>夏季巢温31℃→34.5℃</td>
            <td>5:1→雄性占比骤降</td>
            <td>34℃以上雄性激素受抑制</td>
            <td>NOAA气候报告</td>
        </tr>
        <tr>
            <td>湾鳄(咸水鳄)</td>
            <td>澳大利亚北部</td>
            <td>旱季巢温34℃→36℃</td>
            <td>单性别窝比例↑30%</td>
            <td>极端干旱迫使巢穴深度不足</td>
            <td>澳大利亚生态学报</td>
        </tr>
        <tr>
            <td>尼罗鳄</td>
            <td>非洲维多利亚湖流域</td>
            <td>年均温28℃→30.5℃</td>
            <td>2:1→4:1</td>
            <td>湖水盐度升高叠加温度胁迫</td>
            <td>IUCN红皮书</td>
        </tr>
        <tr>
            <td>暹罗鳄(泰国鳄)</td>
            <td>东南亚红树林区</td>
            <td>旱季高温峰值35℃→38℃</td>
            <td>雌性占比超90%</td>
            <td>温度敏感期(TSP)波动超±2℃</td>
            <td>泰国渔业局统计</td>
        </tr>
        <tr>
            <td>美洲鳄(宽吻鳄)</td>
            <td>哥斯达黎加塔尔科莱斯河</td>
            <td>巢温32℃→35℃</td>
            <td>6:1→雄性存活率↓60%</td>
            <td>工业污染与高温协同作用</td>
            <td>哥斯达黎加研究</td>
        </tr>
    </table>

    <div class="note">
        <p><strong>补充说明：</strong></p>
        <p>1. <strong>温度阈值机制</strong>：鳄鱼性别由孵化期温度决定，以扬子鳄为例：</p>
        <ul>
            <li>28-31.5℃：全雌性</li>
            <li>≥32.5℃：全雄性</li>
            <li>极端高温(如湾鳄巢温36℃)会导致胚胎死亡或性别分化异常</li>
        </ul>
        <p>2. <strong>气候变化叠加效应</strong>：</p>
        <ul>
            <li>扬子鳄栖息地冬季最低温从-2.3℃升至1.2℃，导致冬眠期缩短2个月，代谢紊乱影响繁殖力</li>
            <li>佛罗里达密西西比鳄因海平面上升，60%传统巢区被海水入侵，被迫在次优区域筑巢</li>
        </ul>
        <p>3. <strong>人工干预案例</strong>：</p>
        <ul>
            <li>内蒙古暹罗鳄养殖场通过恒温大棚(25-33℃)实现性别可控，但野外种群仍面临失衡</li>
            <li>长江流域实施"人工巢穴降温工程"，使扬子鳄雌雄比从7:1回调至4:1</li>
        </ul>
    </div>

    <script>
        // 初始化ECharts实例
        var myChart = echarts.init(document.getElementById('map-container'));

        // 数据准备 - 根据提供的表格数据更新
        var data = [
            {name: '中国长江流域(扬子鳄)', value: [116.0, 30.0, 17.0, '3:1→7:1', '冬季升温缩短冬眠期，巢温突破32.5℃阈值']},
            {name: '美国佛罗里达州(密西西比鳄)', value: [-81.5, 27.5, 32.75, '5:1→雄性占比骤降', '34℃以上雄性激素受抑制']},
            {name: '澳大利亚北部(湾鳄)', value: [133.0, -15.0, 35.0, '单性别窝比例↑30%', '极端干旱迫使巢穴深度不足']},
            {name: '非洲维多利亚湖流域(尼罗鳄)', value: [33.0, -1.0, 29.25, '2:1→4:1', '湖水盐度升高叠加温度胁迫']},
            {name: '东南亚红树林区(暹罗鳄)', value: [100.0, 13.0, 36.5, '雌性占比超90%', '温度敏感期(TSP)波动超±2℃']},
            {name: '哥斯达黎加塔尔科莱斯河(美洲鳄)', value: [-85.0, 10.0, 33.5, '6:1→雄性存活率↓60%', '工业污染与高温协同作用']}
        ];

        // 温度范围调整
        var tempRange = [15, 38];
        
        // 配置项
        var option = {
            backgroundColor: '#F5F5F5',
            tooltip: {
                trigger: 'item',
                formatter: function(params) {
                    if (params.data) {
                        return '<strong style="font-size:16px;">' + params.name + '</strong><br/>' +
                               '<span style="font-size:15px;">温度变化: ' + (params.data.value[2]-1.5).toFixed(1) + '°C-' + (params.data.value[2]+1.5).toFixed(1) + '°C</span><br/>' +
                               '<span style="font-size:15px;">雌雄比例: ' + params.data.value[3] + '</span><br/>' +
                               '<span style="font-size:15px;">主要因素: ' + params.data.value[4] + '</span>';
                    }
                    return params.name;
                }
            },
            visualMap: {
                min: tempRange[0],
                max: tempRange[1],
                text: ['高温', '低温'],
                textStyle: {
                    color: '#333',
                    fontSize: 14
                },
                realtime: false,
                calculable: true,
                inRange: {
                    color: ['#ADD8E6', '#1E90FF', '#FFFF00', '#FFA500', '#FF4500']
                }
            },
            geo: {
                map: 'world',
                roam: true,
                emphasis: {
                    label: {
                        show: false
                    }
                },
                itemStyle: {
                    areaColor: '#EAEAEA',
                    borderColor: '#AAA',
                    borderWidth: 0.5
                }
            },
            series: [
                {
                    name: '鳄鱼分布地',
                    type: 'scatter',
                    coordinateSystem: 'geo',
                    data: data,
                    symbolSize: function(val) {
                        return 18 + (val[2] - tempRange[0]) * 1.5;
                    },
                    encode: {
                        value: 2
                    },
                    label: {
                        formatter: function(params) {
                            return [
                                '{b|' + params.name + '}',
                                '{c|' + (params.data.value[2]-1.5).toFixed(1) + '°C-' + (params.data.value[2]+1.5).toFixed(1) + '°C}',
                                '{d|比例: ' + params.data.value[3] + '}'
                            ].join('\n');
                        },
                        position: 'right',
                        show: true,
                        rich: {
                            b: {
                                fontSize: 14,
                                fontWeight: 'bold',
                                color: '#333'
                            },
                            c: {
                                fontSize: 13,
                                color: '#666'
                            },
                            d: {
                                fontSize: 13,
                                color: '#E91E63',
                                padding: [3, 0, 0, 0]
                            }
                        },
                        distance: 15
                    },
                    emphasis: {
                        label: {
                            show: true
                        }
                    },
                    itemStyle: {
                        color: function(param) {
                            var temp = param.data.value[2];
                            var ratio = (temp - tempRange[0]) / (tempRange[1] - tempRange[0]);
                            return echarts.color.modifyHSL('#FF0000', 0, 0.5 - ratio * 0.5, 0.5 + ratio * 0.3);
                        },
                        shadowBlur: 8,
                        shadowColor: 'rgba(0, 0, 0, 0.3)'
                    }
                },
                {
                    name: '温度',
                    type: 'heatmap',
                    coordinateSystem: 'geo',
                    data: data.map(function(item) {
                        return {
                            name: item.name,
                            value: [...item.value],
                            label: {
                                show: false
                            }
                        };
                    }),
                    pointSize: 20,
                    blurSize: 15,
                    gradientColors: ['#ADD8E6', '#1E90FF', '#FFFF00', '#FFA500', '#FF4500'],
                    minOpacity: 0.4,
                    maxOpacity: 0.8
                }
            ],
            title: {
                text: '全球鳄鱼分布地气温热力图(°C)',
                subtext: '颜色深浅表示温度高低，点击标记查看详细信息',
                left: 'center',
                textStyle: {
                    color: '#333',
                    fontSize: 22,
                    fontWeight: 'bold'
                },
                subtextStyle: {
                    color: '#666',
                    fontSize: 16
                }
            }
        };

        // 使用配置项显示图表
        myChart.setOption(option);
        
        // 响应式调整
        window.addEventListener('resize', function() {
            myChart.resize();
        });
    </script>
</body>
</html>